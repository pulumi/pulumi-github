// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as utilities from "./utilities";

/**
 * This resource allows you to create and manage GitHub Actions secrets within your GitHub organization.
 * You must have write access to a repository to use this resource.
 *
 * Secret values are encrypted using the [Go '/crypto/box' module](https://godoc.org/golang.org/x/crypto/nacl/box) which is
 * interoperable with [libsodium](https://libsodium.gitbook.io/doc/). Libsodium is used by GitHub to decrypt secret values.
 *
 * For the purposes of security, the contents of the `plaintextValue` field have been marked as `sensitive` to Terraform,
 * but it is important to note that **this does not hide it from state files**. You should treat state as sensitive always.
 * It is also advised that you do not store plaintext values in your code but rather populate the `encryptedValue`
 * using fields from a resource, data source or variable as, while encrypted in state, these will be easily accessible
 * in your code. See below for an example of this abstraction.
 *
 * ## Example Usage
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as github from "@pulumi/github";
 *
 * const examplePlaintext = new github.ActionsOrganizationSecret("example_plaintext", {
 *     secretName: "example_secret_name",
 *     visibility: "all",
 *     plaintextValue: someSecretString,
 * });
 * const exampleEncrypted = new github.ActionsOrganizationSecret("example_encrypted", {
 *     secretName: "example_secret_name",
 *     visibility: "all",
 *     encryptedValue: someEncryptedSecretString,
 * });
 * ```
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as github from "@pulumi/github";
 *
 * const repo = github.getRepository({
 *     fullName: "my-org/repo",
 * });
 * const exampleEncrypted = new github.ActionsOrganizationSecret("example_encrypted", {
 *     secretName: "example_secret_name",
 *     visibility: "selected",
 *     plaintextValue: someSecretString,
 *     selectedRepositoryIds: [repo.then(repo => repo.repoId)],
 * });
 * const exampleSecret = new github.ActionsOrganizationSecret("example_secret", {
 *     secretName: "example_secret_name",
 *     visibility: "selected",
 *     encryptedValue: someEncryptedSecretString,
 *     selectedRepositoryIds: [repo.then(repo => repo.repoId)],
 * });
 * ```
 *
 * ## Example Lifecycle Ignore Changes
 *
 * This resource supports using the `lifecycle` `ignoreChanges` block on `remoteUpdatedAt` to support use cases where a secret value is created using a placeholder value and then modified after creation outside the scope of Terraform. This approach ensures only the initial placeholder value is referenced in your code and in the resulting state file.
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as github from "@pulumi/github";
 *
 * const exampleAllowDrift = new github.ActionsOrganizationSecret("example_allow_drift", {
 *     secretName: "example_secret_name",
 *     visibility: "all",
 *     plaintextValue: "placeholder",
 * });
 * ```
 *
 * ## Import
 *
 * This resource can be imported using the secret name as the ID.
 *
 * > **Note**: When importing secrets, the `plaintextValue` or `encryptedValue` fields will not be populated in the state. You may need to ignore changes for these as a workaround if you're not planning on updating the secret through Terraform.
 *
 * ### Import Command
 *
 * The following command imports a GitHub actions organization secret named `mysecret` to a `github.ActionsOrganizationSecret` resource named `example`.
 *
 * ```sh
 * $ pulumi import github:index/actionsOrganizationSecret:ActionsOrganizationSecret example mysecret
 * ```
 */
export class ActionsOrganizationSecret extends pulumi.CustomResource {
    /**
     * Get an existing ActionsOrganizationSecret resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: ActionsOrganizationSecretState, opts?: pulumi.CustomResourceOptions): ActionsOrganizationSecret {
        return new ActionsOrganizationSecret(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'github:index/actionsOrganizationSecret:ActionsOrganizationSecret';

    /**
     * Returns true if the given object is an instance of ActionsOrganizationSecret.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is ActionsOrganizationSecret {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === ActionsOrganizationSecret.__pulumiType;
    }

    /**
     * Date the secret was created.
     */
    declare public /*out*/ readonly createdAt: pulumi.Output<string>;
    /**
     * (Optional) This is ignored as drift detection is built into the resource.
     *
     * > **Note**: One of either `encryptedValue` or `plaintextValue` must be specified.
     *
     * @deprecated This is no longer required and will be removed in a future release. Drift detection is now always performed, and external changes will result in the secret being updated to match the Terraform configuration. If you want to ignore external changes, you can use the `lifecycle` block with `ignoreChanges` on the `remoteUpdatedAt` field.
     */
    declare public readonly destroyOnDrift: pulumi.Output<boolean | undefined>;
    /**
     * Encrypted value of the secret using the GitHub public key in Base64 format.
     */
    declare public readonly encryptedValue: pulumi.Output<string | undefined>;
    /**
     * ID of the public key used to encrypt the secret. This should be provided when setting `encryptedValue`; if it isn't then the current public key will be looked up, which could cause a missmatch. This conflicts with `plaintextValue`.
     */
    declare public readonly keyId: pulumi.Output<string>;
    /**
     * Plaintext value of the secret to be encrypted.
     */
    declare public readonly plaintextValue: pulumi.Output<string | undefined>;
    /**
     * Date the secret was last updated in GitHub.
     */
    declare public /*out*/ readonly remoteUpdatedAt: pulumi.Output<string>;
    /**
     * Name of the secret.
     */
    declare public readonly secretName: pulumi.Output<string>;
    /**
     * An array of repository IDs that can access the organization variable; this requires `visibility` to be set to `selected`.
     *
     * @deprecated This field is deprecated and will be removed in a future release. Please use the `github.ActionsOrganizationSecretRepositories` or `github.ActionsOrganizationSecretRepository` resources to manage repository access to organization secrets.
     */
    declare public readonly selectedRepositoryIds: pulumi.Output<number[] | undefined>;
    /**
     * Date the secret was last updated by the provider.
     */
    declare public /*out*/ readonly updatedAt: pulumi.Output<string>;
    /**
     * Configures the access that repositories have to the organization secret; must be one of `all`, `private`, or `selected`.
     */
    declare public readonly visibility: pulumi.Output<string>;

    /**
     * Create a ActionsOrganizationSecret resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: ActionsOrganizationSecretArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: ActionsOrganizationSecretArgs | ActionsOrganizationSecretState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as ActionsOrganizationSecretState | undefined;
            resourceInputs["createdAt"] = state?.createdAt;
            resourceInputs["destroyOnDrift"] = state?.destroyOnDrift;
            resourceInputs["encryptedValue"] = state?.encryptedValue;
            resourceInputs["keyId"] = state?.keyId;
            resourceInputs["plaintextValue"] = state?.plaintextValue;
            resourceInputs["remoteUpdatedAt"] = state?.remoteUpdatedAt;
            resourceInputs["secretName"] = state?.secretName;
            resourceInputs["selectedRepositoryIds"] = state?.selectedRepositoryIds;
            resourceInputs["updatedAt"] = state?.updatedAt;
            resourceInputs["visibility"] = state?.visibility;
        } else {
            const args = argsOrState as ActionsOrganizationSecretArgs | undefined;
            if (args?.secretName === undefined && !opts.urn) {
                throw new Error("Missing required property 'secretName'");
            }
            if (args?.visibility === undefined && !opts.urn) {
                throw new Error("Missing required property 'visibility'");
            }
            resourceInputs["destroyOnDrift"] = args?.destroyOnDrift;
            resourceInputs["encryptedValue"] = args?.encryptedValue ? pulumi.secret(args.encryptedValue) : undefined;
            resourceInputs["keyId"] = args?.keyId;
            resourceInputs["plaintextValue"] = args?.plaintextValue ? pulumi.secret(args.plaintextValue) : undefined;
            resourceInputs["secretName"] = args?.secretName;
            resourceInputs["selectedRepositoryIds"] = args?.selectedRepositoryIds;
            resourceInputs["visibility"] = args?.visibility;
            resourceInputs["createdAt"] = undefined /*out*/;
            resourceInputs["remoteUpdatedAt"] = undefined /*out*/;
            resourceInputs["updatedAt"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        const secretOpts = { additionalSecretOutputs: ["encryptedValue", "plaintextValue"] };
        opts = pulumi.mergeOptions(opts, secretOpts);
        super(ActionsOrganizationSecret.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering ActionsOrganizationSecret resources.
 */
export interface ActionsOrganizationSecretState {
    /**
     * Date the secret was created.
     */
    createdAt?: pulumi.Input<string>;
    /**
     * (Optional) This is ignored as drift detection is built into the resource.
     *
     * > **Note**: One of either `encryptedValue` or `plaintextValue` must be specified.
     *
     * @deprecated This is no longer required and will be removed in a future release. Drift detection is now always performed, and external changes will result in the secret being updated to match the Terraform configuration. If you want to ignore external changes, you can use the `lifecycle` block with `ignoreChanges` on the `remoteUpdatedAt` field.
     */
    destroyOnDrift?: pulumi.Input<boolean>;
    /**
     * Encrypted value of the secret using the GitHub public key in Base64 format.
     */
    encryptedValue?: pulumi.Input<string>;
    /**
     * ID of the public key used to encrypt the secret. This should be provided when setting `encryptedValue`; if it isn't then the current public key will be looked up, which could cause a missmatch. This conflicts with `plaintextValue`.
     */
    keyId?: pulumi.Input<string>;
    /**
     * Plaintext value of the secret to be encrypted.
     */
    plaintextValue?: pulumi.Input<string>;
    /**
     * Date the secret was last updated in GitHub.
     */
    remoteUpdatedAt?: pulumi.Input<string>;
    /**
     * Name of the secret.
     */
    secretName?: pulumi.Input<string>;
    /**
     * An array of repository IDs that can access the organization variable; this requires `visibility` to be set to `selected`.
     *
     * @deprecated This field is deprecated and will be removed in a future release. Please use the `github.ActionsOrganizationSecretRepositories` or `github.ActionsOrganizationSecretRepository` resources to manage repository access to organization secrets.
     */
    selectedRepositoryIds?: pulumi.Input<pulumi.Input<number>[]>;
    /**
     * Date the secret was last updated by the provider.
     */
    updatedAt?: pulumi.Input<string>;
    /**
     * Configures the access that repositories have to the organization secret; must be one of `all`, `private`, or `selected`.
     */
    visibility?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a ActionsOrganizationSecret resource.
 */
export interface ActionsOrganizationSecretArgs {
    /**
     * (Optional) This is ignored as drift detection is built into the resource.
     *
     * > **Note**: One of either `encryptedValue` or `plaintextValue` must be specified.
     *
     * @deprecated This is no longer required and will be removed in a future release. Drift detection is now always performed, and external changes will result in the secret being updated to match the Terraform configuration. If you want to ignore external changes, you can use the `lifecycle` block with `ignoreChanges` on the `remoteUpdatedAt` field.
     */
    destroyOnDrift?: pulumi.Input<boolean>;
    /**
     * Encrypted value of the secret using the GitHub public key in Base64 format.
     */
    encryptedValue?: pulumi.Input<string>;
    /**
     * ID of the public key used to encrypt the secret. This should be provided when setting `encryptedValue`; if it isn't then the current public key will be looked up, which could cause a missmatch. This conflicts with `plaintextValue`.
     */
    keyId?: pulumi.Input<string>;
    /**
     * Plaintext value of the secret to be encrypted.
     */
    plaintextValue?: pulumi.Input<string>;
    /**
     * Name of the secret.
     */
    secretName: pulumi.Input<string>;
    /**
     * An array of repository IDs that can access the organization variable; this requires `visibility` to be set to `selected`.
     *
     * @deprecated This field is deprecated and will be removed in a future release. Please use the `github.ActionsOrganizationSecretRepositories` or `github.ActionsOrganizationSecretRepository` resources to manage repository access to organization secrets.
     */
    selectedRepositoryIds?: pulumi.Input<pulumi.Input<number>[]>;
    /**
     * Configures the access that repositories have to the organization secret; must be one of `all`, `private`, or `selected`.
     */
    visibility: pulumi.Input<string>;
}
