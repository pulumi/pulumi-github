// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.Github
{
    /// <summary>
    /// This resource allows you to create and manage GitHub Actions secrets within your GitHub repository environments.
    /// You must have write access to a repository to use this resource.
    /// 
    /// Secret values are encrypted using the [Go '/crypto/box' module](https://godoc.org/golang.org/x/crypto/nacl/box) which is
    /// interoperable with [libsodium](https://libsodium.gitbook.io/doc/). Libsodium is used by GitHub to decrypt secret values.
    /// 
    /// For the purposes of security, the contents of the `PlaintextValue` field have been marked as `Sensitive` to Terraform,
    /// but it is important to note that **this does not hide it from state files**. You should treat state as sensitive always.
    /// It is also advised that you do not store plaintext values in your code but rather populate the `EncryptedValue`
    /// using fields from a resource, data source or variable as, while encrypted in state, these will be easily accessible
    /// in your code. See below for an example of this abstraction.
    /// 
    /// ## Example Lifecycle Ignore Changes
    /// 
    /// This resource supports using the `Lifecycle` `IgnoreChanges` block on `RemoteUpdatedAt` to support use cases where a secret value is created using a placeholder value and then modified after creation outside the scope of Terraform. This approach ensures only the initial placeholder value is referenced in your code and in the resulting state file.
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Github = Pulumi.Github;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var exampleAllowDrift = new Github.ActionsEnvironmentSecret("example_allow_drift", new()
    ///     {
    ///         Repository = "example-repo",
    ///         Environment = "example-environment",
    ///         SecretName = "example_secret_name",
    ///         PlaintextValue = "placeholder",
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// ## Import
    /// 
    /// This resource can be imported using an ID made of the repository name, environment name (URL escaped), and secret name all separated by a `:`.
    /// 
    /// &gt; **Note**: When importing secrets, the `PlaintextValue` or `EncryptedValue` fields will not be populated in the state. You may need to ignore changes for these as a workaround if you're not planning on updating the secret through Terraform.
    /// 
    /// ### Import Command
    /// 
    /// The following command imports a GitHub actions environment secret named `Mysecret` for the repo `Myrepo` and environment `Myenv` to a `github.ActionsEnvironmentSecret` resource named `Example`.
    /// 
    /// ```sh
    /// $ pulumi import github:index/actionsEnvironmentSecret:ActionsEnvironmentSecret example myrepo:myenv:mysecret
    /// ```
    /// </summary>
    [GithubResourceType("github:index/actionsEnvironmentSecret:ActionsEnvironmentSecret")]
    public partial class ActionsEnvironmentSecret : global::Pulumi.CustomResource
    {
        /// <summary>
        /// Date the secret was created.
        /// </summary>
        [Output("createdAt")]
        public Output<string> CreatedAt { get; private set; } = null!;

        /// <summary>
        /// Encrypted value of the secret using the GitHub public key in Base64 format.
        /// </summary>
        [Output("encryptedValue")]
        public Output<string?> EncryptedValue { get; private set; } = null!;

        /// <summary>
        /// Name of the environment.
        /// </summary>
        [Output("environment")]
        public Output<string> Environment { get; private set; } = null!;

        /// <summary>
        /// ID of the public key used to encrypt the secret. This should be provided when setting `EncryptedValue`; if it isn't then the current public key will be looked up, which could cause a missmatch. This conflicts with `PlaintextValue`.
        /// </summary>
        [Output("keyId")]
        public Output<string> KeyId { get; private set; } = null!;

        /// <summary>
        /// Plaintext value of the secret to be encrypted.
        /// 
        /// &gt; **Note**: One of either `EncryptedValue` or `PlaintextValue` must be specified.
        /// </summary>
        [Output("plaintextValue")]
        public Output<string?> PlaintextValue { get; private set; } = null!;

        /// <summary>
        /// Date the secret was last updated in GitHub.
        /// </summary>
        [Output("remoteUpdatedAt")]
        public Output<string> RemoteUpdatedAt { get; private set; } = null!;

        /// <summary>
        /// Name of the repository.
        /// </summary>
        [Output("repository")]
        public Output<string> Repository { get; private set; } = null!;

        /// <summary>
        /// ID of the repository.
        /// </summary>
        [Output("repositoryId")]
        public Output<int> RepositoryId { get; private set; } = null!;

        /// <summary>
        /// Name of the secret.
        /// </summary>
        [Output("secretName")]
        public Output<string> SecretName { get; private set; } = null!;

        /// <summary>
        /// Date the secret was last updated by the provider.
        /// </summary>
        [Output("updatedAt")]
        public Output<string> UpdatedAt { get; private set; } = null!;


        /// <summary>
        /// Create a ActionsEnvironmentSecret resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public ActionsEnvironmentSecret(string name, ActionsEnvironmentSecretArgs args, CustomResourceOptions? options = null)
            : base("github:index/actionsEnvironmentSecret:ActionsEnvironmentSecret", name, args ?? new ActionsEnvironmentSecretArgs(), MakeResourceOptions(options, ""))
        {
        }

        private ActionsEnvironmentSecret(string name, Input<string> id, ActionsEnvironmentSecretState? state = null, CustomResourceOptions? options = null)
            : base("github:index/actionsEnvironmentSecret:ActionsEnvironmentSecret", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                AdditionalSecretOutputs =
                {
                    "plaintextValue",
                },
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing ActionsEnvironmentSecret resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static ActionsEnvironmentSecret Get(string name, Input<string> id, ActionsEnvironmentSecretState? state = null, CustomResourceOptions? options = null)
        {
            return new ActionsEnvironmentSecret(name, id, state, options);
        }
    }

    public sealed class ActionsEnvironmentSecretArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Encrypted value of the secret using the GitHub public key in Base64 format.
        /// </summary>
        [Input("encryptedValue")]
        public Input<string>? EncryptedValue { get; set; }

        /// <summary>
        /// Name of the environment.
        /// </summary>
        [Input("environment", required: true)]
        public Input<string> Environment { get; set; } = null!;

        /// <summary>
        /// ID of the public key used to encrypt the secret. This should be provided when setting `EncryptedValue`; if it isn't then the current public key will be looked up, which could cause a missmatch. This conflicts with `PlaintextValue`.
        /// </summary>
        [Input("keyId")]
        public Input<string>? KeyId { get; set; }

        [Input("plaintextValue")]
        private Input<string>? _plaintextValue;

        /// <summary>
        /// Plaintext value of the secret to be encrypted.
        /// 
        /// &gt; **Note**: One of either `EncryptedValue` or `PlaintextValue` must be specified.
        /// </summary>
        public Input<string>? PlaintextValue
        {
            get => _plaintextValue;
            set
            {
                var emptySecret = Output.CreateSecret(0);
                _plaintextValue = Output.Tuple<Input<string>?, int>(value, emptySecret).Apply(t => t.Item1);
            }
        }

        /// <summary>
        /// Name of the repository.
        /// </summary>
        [Input("repository", required: true)]
        public Input<string> Repository { get; set; } = null!;

        /// <summary>
        /// Name of the secret.
        /// </summary>
        [Input("secretName", required: true)]
        public Input<string> SecretName { get; set; } = null!;

        public ActionsEnvironmentSecretArgs()
        {
        }
        public static new ActionsEnvironmentSecretArgs Empty => new ActionsEnvironmentSecretArgs();
    }

    public sealed class ActionsEnvironmentSecretState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Date the secret was created.
        /// </summary>
        [Input("createdAt")]
        public Input<string>? CreatedAt { get; set; }

        /// <summary>
        /// Encrypted value of the secret using the GitHub public key in Base64 format.
        /// </summary>
        [Input("encryptedValue")]
        public Input<string>? EncryptedValue { get; set; }

        /// <summary>
        /// Name of the environment.
        /// </summary>
        [Input("environment")]
        public Input<string>? Environment { get; set; }

        /// <summary>
        /// ID of the public key used to encrypt the secret. This should be provided when setting `EncryptedValue`; if it isn't then the current public key will be looked up, which could cause a missmatch. This conflicts with `PlaintextValue`.
        /// </summary>
        [Input("keyId")]
        public Input<string>? KeyId { get; set; }

        [Input("plaintextValue")]
        private Input<string>? _plaintextValue;

        /// <summary>
        /// Plaintext value of the secret to be encrypted.
        /// 
        /// &gt; **Note**: One of either `EncryptedValue` or `PlaintextValue` must be specified.
        /// </summary>
        public Input<string>? PlaintextValue
        {
            get => _plaintextValue;
            set
            {
                var emptySecret = Output.CreateSecret(0);
                _plaintextValue = Output.Tuple<Input<string>?, int>(value, emptySecret).Apply(t => t.Item1);
            }
        }

        /// <summary>
        /// Date the secret was last updated in GitHub.
        /// </summary>
        [Input("remoteUpdatedAt")]
        public Input<string>? RemoteUpdatedAt { get; set; }

        /// <summary>
        /// Name of the repository.
        /// </summary>
        [Input("repository")]
        public Input<string>? Repository { get; set; }

        /// <summary>
        /// ID of the repository.
        /// </summary>
        [Input("repositoryId")]
        public Input<int>? RepositoryId { get; set; }

        /// <summary>
        /// Name of the secret.
        /// </summary>
        [Input("secretName")]
        public Input<string>? SecretName { get; set; }

        /// <summary>
        /// Date the secret was last updated by the provider.
        /// </summary>
        [Input("updatedAt")]
        public Input<string>? UpdatedAt { get; set; }

        public ActionsEnvironmentSecretState()
        {
        }
        public static new ActionsEnvironmentSecretState Empty => new ActionsEnvironmentSecretState();
    }
}
